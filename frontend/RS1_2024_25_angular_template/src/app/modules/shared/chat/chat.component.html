<div class="chat-container">
  <!-- Left panel: conversation list -->
  <div class="conversation-list">
    <div class="header">
      <h3>Chat</h3>
      <button>+ Compose</button>
    </div>
    <input type="text" placeholder="Search" class="search-bar" />
    <div *ngFor="let convo of conversations"
         class="conversation-item"
         [class.active]="convo.userId === selectedConversation?.userId"
         (click)="selectConversation(convo)">
      <div class="name">{{ convo.fullName }}</div>
      <div class="preview">{{ convo.lastMessage }}</div>
      <div class="time">{{ convo.lastMessageTime | date: 'dd. MM. yyyy. HH:mm' }}</div>
    </div>
  </div>

  <!-- Right panel: active chat -->
  <div class="chat-window">
    <div class="chat-header">
      <div class="name">{{ selectedConversation?.fullName }}</div>
    </div>

    <div class="messages-container">
      <div *ngFor="let msg of messages">
        <div class="message"
             [ngClass]="{ 'mine': msg.senderId === currentUserId }">
          <div class="content">
                 <span *ngIf="msg.senderId !== currentUserId" class="sender-name">
                    {{ msg.senderFullName }}</span>
            {{ msg.content }}
          </div>
          <div class="time">{{ msg.sentAt | date: 'dd. MM. yyyy. HH:mm' }}</div>
        </div>
      </div>
    </div>

    <div class="chat-input">
      <input type="text" [(ngModel)]="newMessage" placeholder="Type your message" />
      <button (click)="sendMessage()">Send</button>
    </div>
  </div>
</div>
